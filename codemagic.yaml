workflows:
  ios-workflow:
    name: iOS Build
    environment:
      xcode: latest
      cocoapods: default
      node: latest
      vars:
        XCODE_WORKSPACE: "NetworkInfoAppRN.xcworkspace"
        XCODE_SCHEME: "NetworkInfoAppRN"
        PACKAGE_PATH: "NetworkInfoAppRN"
    scripts:
      - name: Install dependencies
        script: |
          cd $PACKAGE_PATH
          npm ci
      - name: Install iOS dependencies
        script: |
          cd $PACKAGE_PATH/ios
          pod install
      - name: Build iOS app
        script: |
          cd $PACKAGE_PATH/ios
          xcodebuild build -workspace $XCODE_WORKSPACE \
                          -scheme $XCODE_SCHEME \
                          -configuration Debug \
                          -destination generic/platform=iOS \
                          -derivedDataPath build \
                          clean build
    artifacts:
      - $PACKAGE_PATH/ios/build/
      - $PACKAGE_PATH/ios/build.log
